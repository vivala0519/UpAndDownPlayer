<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css">
    </head>
    <body>
        <div id="app">
            <h2>10í„´ì•ˆì— ìˆ«ì ë§ì¶”ê¸°</h2>
            <button id="startButton" onclick="clickStart()">ì‹œì‘í•˜ê¸°</button>
            <div class="wrapper">
                <div class="main">
                    <input id="numInput"/>
                    <button class="inputButton" onclick="clickInputButton()">ì…ë ¥</button>
                    <div id="result"></div>
                </div>
                <div class="turn">
                    <div id="nowTurn">
                        í˜„ì¬ : 0
                    </div>
                    <br/>
                    <div id="leftTurn">
                        ë‚¨ì€ í„´ : 10
                    </div>
                </div>
                <div class="history">
                    HISTORY
                    <div id="historyContent"></div>
                </div>
            </div>
        </div>

        <script>
            // start: false - ì‹œì‘, true - ë‹¤ì‹œ ì‹œì‘
            // nowTurn: í˜„ì¬ í„´
            // leftTurn: ë‚¨ì€ í„´
            // target: ëœë¤ìœ¼ë¡œ ìƒì„±ëœ 1 ~ 100 ìˆ«ì
            let start = false;
            let nowTurn = 0;
            let leftTurn = 10; 
            let target = Math.floor(Math.random() * 100) + 1;
            console.log(target);

            // ì‹œì‘ ë²„íŠ¼ Function
            // 'ì‹œì‘' ë²„íŠ¼ í´ë¦­ ì‹œ 'ë‹¤ì‹œ ì‹œì‘' ë²„íŠ¼ìœ¼ë¡œ ë°”ë€Œê³  í™”ë©´ì—ì„œ ìˆ¨ê²¨ì§„ë‹¤.
            // ê²Œì„ì´ ì¢…ë£Œë˜ê³  'ë‹¤ì‹œ ì‹œì‘' ë²„íŠ¼ì´ ìƒê¸°ë©° ë‹¤ì‹œ ì‹œì‘ì„ ëˆ„ë¥´ë©´ ëœë¤ìˆ«ìê°€ ì¬ìƒì„±ë˜ë©° ëª¨ë“  uiê°€ ì´ˆê¸°í™” ëœë‹¤.
            const clickStart = () => {
                if(start === false){
                    start = true;
                    document.getElementById('startButton').innerText = 'ë‹¤ì‹œ ì‹œì‘';
                    $('.wrapper').css('visibility', 'visible');
                } else{
                    target = Math.floor(Math.random() * 100) + 1;
                    console.log(target);
                    document.getElementById('numInput').value = null;
                    $('#result').empty();
                    $('#historyContent').empty();
                    $('#nowTurn').empty();
                    $('#leftTurn').empty();
                    $('#nowTurn').append(`í˜„ì¬ : 0`);
                    $('#leftTurn').append(`ë‚¨ì€ í„´ : 10`);
                    $("#numInput").removeAttr("disabled");
                    $('.inputButton').css('visibility', 'visible');
                }
                
                $('#startButton').css('visibility', 'hidden');
            }

            // ìˆ«ì ì…ë ¥ë²„íŠ¼ Function
            // ì…ë ¥í•  ë•Œë§ˆë‹¤ í„´ì´ ì¦ê°€í•˜ê³  ë‚¨ì€ í„´ì´ ì¤„ì–´ë“¤ë©°, íˆìŠ¤í† ë¦¬ì— ì…ë ¥í–ˆë˜ ìˆ«ìê°€ ê¸°ë¡ëœë‹¤.
            const clickInputButton = () => {
                const num = document.getElementById('numInput').value;
                nowTurn += 1;
                leftTurn = 10 - nowTurn;

                $('#nowTurn').empty();
                $('#leftTurn').empty();
                $('#nowTurn').append(`í˜„ì¬ : <span>${nowTurn}</span>`);
                $('#leftTurn').append(`ë‚¨ì€ í„´ : <span>${leftTurn}</span>`);
                $('#historyContent').append(`<p>${nowTurn}í„´ ${num}</p>`);
                
                // ë§ˆì§€ë§‰ í„´ê¹Œì§€ ë§ì¶”ì§€ ëª»í–ˆì„ ë•Œ
                if(leftTurn === 0){
                    alert('ì‹¤íŒ¨ã… ');
                    $("#numInput").attr("disabled", true);
                    $('.inputButton').css('visibility', 'hidden');
                } else{
                    $('#result').empty();
                    if(num < target){                               // ëª©í‘œìˆ«ìë³´ë‹¤ ì‘ì„ ë•Œ
                        $('#result').append(`<p>ğŸ‘</p>`);
                    } else if(num > target) {                       // ëª©í‘œìˆ«ìë³´ë‹¤ í´ ë•Œ
                        $('#result').append(`<p>ğŸ‘</p>`);
                    } else{                                         // ì •ë‹µì¼ ë•Œ
                        $("#numInput").attr('disabled', true); 
                        $('#startButton').css('visibility', 'visible');
                        $('#result').append(`<p>ğŸ‘</p>`);
                        $('.inputButton').css('visibility', 'hidden');
                        alert('ğŸ‘ì •ë‹µ!!ğŸ‘');
                    }
                }

                document.getElementById('numInput').value = null;   // input ì´ˆê¸°í™”
            }
        </script>
    </body>
</html>